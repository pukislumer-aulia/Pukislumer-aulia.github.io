<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pukis Lumer Aulia</title>
  <meta name="description" content="Pukis lumer terenak di Padang Panjang!"/>
  <link rel="stylesheet" href="assets/css/style.css"/>
  <link rel="stylesheet" href="assets/css/form-style.css"/>
  <link rel="stylesheet" href="assets/css/floating-buttons.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Chewy&family=Kanit:wght@900&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body style="font-family: 'Segoe UI', sans-serif; line-height: 1.7; padding: 20px; background-color: #fffefb; color: #333;">  <div class="page-wrapper">
    <h2>Form Pemesanan</h2>
    <form id="orderForm" style="margin-bottom: 40px;">
      <label for="jenisPukis"><strong>Jenis Pukis:</strong></label><br>
      <select name="jenisPukis" id="jenisPukis" required>
        <option value="original">Original</option>
        <option value="pandan">Pandan</option>
      </select><br><br><label for="boxSize"><strong>Ukuran Box:</strong></label><br>
  <select id="boxSize" name="boxSize" required>
    <option value="5">Box Isi 5</option>
    <option value="10">Box Isi 10</option>
  </select><br><br>

  <label><strong>Pilih Jenis Topping:</strong></label><br>
  <input type="radio" name="toppingType" value="none" checked> Tanpa Topping
  <input type="radio" name="toppingType" value="single"> Single
  <input type="radio" name="toppingType" value="double"> Double
  <br><br>

  <div id="toppingSingleGroup" style="display:none;">
    <p><strong>Pilih Topping Single:</strong></p>
    <div id="toppingSingleOptions"></div>
  </div>

  <div id="toppingDoubleGroup" style="display:none;">
    <p><strong>Pilih Topping Double (Taburan Atas Topping):</strong></p>
    <div id="toppingDoubleOptions"></div>
  </div>

  <br>
  <label for="namaPemesan"><strong>Nama Pemesan:</strong></label><br>
  <input type="text" id="namaPemesan" name="namaPemesan" required><br><br>

  <label for="catatan"><strong>Catatan Tambahan:</strong></label><br>
  <textarea id="catatan" name="catatan" rows="3"></textarea><br><br>

  <p><strong>Total Harga:</strong> <span id="totalHarga">Rp0</span></p>

  <button type="submit">Kirim Pesanan</button>
</form>

  </div>  <script>
    const toppingSingle = ["Coklat", "Tiramisu", "Stroberi", "Cappucino", "Vanilla", "Taro", "Matcha"];
    const toppingDouble = ["Meses", "Keju", "Kacang", "Choco Chip", "Oreo"];

    function createCheckboxList(containerId, options, name) {
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      options.forEach((topping, i) => {
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = `${name}-${i}`;
        checkbox.name = name;
        checkbox.value = topping;
        checkbox.addEventListener("change", limitSelection);

        const label = document.createElement("label");
        label.htmlFor = checkbox.id;
        label.textContent = topping;

        const wrapper = document.createElement("div");
        wrapper.appendChild(checkbox);
        wrapper.appendChild(label);
        container.appendChild(wrapper);
      });
    }

    function limitSelection() {
      const isiBox = parseInt(document.getElementById("boxSize").value);
      const tipe = document.querySelector("input[name='toppingType']:checked")?.value;
      const singleCheckboxes = document.querySelectorAll("input[name='singleTopping']");
      const doubleCheckboxes = document.querySelectorAll("input[name='doubleTopping']");

      if (tipe === "single") {
        const singleChecked = Array.from(singleCheckboxes).filter(cb => cb.checked);
        singleCheckboxes.forEach(cb => cb.disabled = !cb.checked && singleChecked.length >= isiBox);
        doubleCheckboxes.forEach(cb => cb.disabled = true);
      } else if (tipe === "double") {
        const singleChecked = Array.from(singleCheckboxes).filter(cb => cb.checked);
        const doubleChecked = Array.from(doubleCheckboxes).filter(cb => cb.checked);
        singleCheckboxes.forEach(cb => cb.disabled = !cb.checked && singleChecked.length >= isiBox);
        doubleCheckboxes.forEach(cb => cb.disabled = !cb.checked && doubleChecked.length >= isiBox);
      } else {
        singleCheckboxes.forEach(cb => cb.disabled = true);
        doubleCheckboxes.forEach(cb => cb.disabled = true);
      }
    }

    function updateToppingVisibility() {
      const selected = document.querySelector("input[name='toppingType']:checked")?.value;
      const singleGroup = document.getElementById("toppingSingleGroup");
      const doubleGroup = document.getElementById("toppingDoubleGroup");

      if (selected === "none") {
        singleGroup.style.display = "none";
        doubleGroup.style.display = "none";
      } else if (selected === "single") {
        singleGroup.style.display = "block";
        doubleGroup.style.display = "none";
        createCheckboxList("toppingSingleOptions", toppingSingle, "singleTopping");
      } else if (selected === "double") {
        singleGroup.style.display = "block";
        doubleGroup.style.display = "block";
        createCheckboxList("toppingSingleOptions", toppingSingle, "singleTopping");
        createCheckboxList("toppingDoubleOptions", toppingDouble, "doubleTopping");
      }
    }

    function updateHarga() {
      const jenis = document.getElementById("jenisPukis").value;
      const isiBox = document.getElementById("boxSize").value;
      const topping = document.querySelector("input[name='toppingType']:checked")?.value;

      let harga = 0;
      if (jenis === "original") {
        if (topping === "none") harga = isiBox === "5" ? 10000 : 18000;
        else if (topping === "single") harga = isiBox === "5" ? 13000 : 25000;
        else if (topping === "double") harga = isiBox === "5" ? 15000 : 28000;
      } else if (jenis === "pandan") {
        if (topping === "none") harga = isiBox === "5" ? 12000 : 22000;
        else if (topping === "single") harga = isiBox === "5" ? 15000 : 28000;
        else if (topping === "double") harga = isiBox === "5" ? 18000 : 32000;
      }
      document.getElementById("totalHarga").textContent = `Rp${harga.toLocaleString("id-ID")}`;
    }

    function validateTopping() {
      const isiBox = parseInt(document.getElementById("boxSize").value);
      const tipe = document.querySelector("input[name='toppingType']:checked")?.value;

      if (tipe === "single") {
        const count = document.querySelectorAll("input[name='singleTopping']:checked").length;
        if (count > isiBox) {
          alert("Topping single melebihi isi box!");
          return false;
        }
      }

      if (tipe === "double") {
        const countSingle = document.querySelectorAll("input[name='singleTopping']:checked").length;
        const countDouble = document.querySelectorAll("input[name='doubleTopping']:checked").length;
        if (countSingle > isiBox || countDouble > isiBox) {
          alert("Topping melebihi isi box!");
          return false;
        }
      }

      return true;
    }

    document.getElementById("orderForm").addEventListener("submit", function (e) {
      e.preventDefault();
      if (!validateTopping()) return;

      const jenis = document.getElementById("jenisPukis").value;
      const isi = document.getElementById("boxSize").value;
      const nama = document.getElementById("namaPemesan").value;
      const catatan = document.getElementById("catatan").value || "-";
      const toppingType = document.querySelector("input[name='toppingType']:checked")?.value;

      let toppingList = [];
      if (toppingType === "single") {
        toppingList = Array.from(document.querySelectorAll("input[name='singleTopping']:checked")).map(cb => cb.value);
      } else if (toppingType === "double") {
        const single = Array.from(document.querySelectorAll("input[name='singleTopping']:checked")).map(cb => cb.value);
        const double = Array.from(document.querySelectorAll("input[name='doubleTopping']:checked")).map(cb => cb.value);
        toppingList = [...single, ...double];
      } else {
        toppingList = ["Tanpa Topping"];
      }

      const pesan = `Halo Pukis Lumer Aulia! Saya ingin memesan:\n\n` +
                    `Nama: ${nama}\n` +
                    `Jenis Pukis: ${jenis}\n` +
                    `Ukuran Box: ${isi} pcs\n` +
                    `Topping: ${toppingList.join(', ')}\n` +
                    `Catatan: ${catatan}\n\n` +
                    `Terima kasih!`;

      const encodedPesan = encodeURIComponent(pesan);
      const nomorWA = "6281296668670";
      const waLink = `https://wa.me/${nomorWA}?text=${encodedPesan}`;
      window.open(waLink, '_blank');
    });

    document.getElementById("jenisPukis").addEventListener("change", () => {
      updateToppingVisibility();
      limitSelection();
      updateHarga();
    });

    document.getElementById("boxSize").addEventListener("change", () => {
      updateToppingVisibility();
      limitSelection();
      updateHarga();
    });

    document.querySelectorAll("input[name='toppingType']").forEach(input => {
      input.addEventListener("change", () => {
        updateToppingVisibility();
        limitSelection();
        updateHarga();
      });
    });

    updateToppingVisibility();
    updateHarga();
  </script></body>
</html>
